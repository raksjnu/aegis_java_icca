<?xml version="1.0" encoding="UTF-8"?>
<module name="LogAshish" prefix="module-hello"
	doc:description="This module relies in runtime provided components"
xmlns:http="http://www.mulesoft.org/schema/mule/http"
	xmlns="http://www.mulesoft.org/schema/mule/module"
	xmlns:mule="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xmlns:tns="http://www.mulesoft.org/schema/mule/module-hello"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="
           http://www.mulesoft.org/schema/mule/module http://www.mulesoft.org/schema/mule/module/current/mule-module.xsd
           http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
           http://www.mulesoft.org/schema/mule/module-hello http://www.mulesoft.org/schema/mule/module-hello/current/mule-module-hello.xsd
            http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd">
<!-- A simple config -->
     <property name="host" type="string"/>
    <property name="port" type="string"/>
    <property name="protocol" type="string"/>
    <http:request-config name="httpreq-config" basePath="/">
        <http:request-connection host="#[vars.host]" protocol="#[vars.protocol]" port="#[vars.port]"/>
    </http:request-config>

    <operation name="do-get">
     
        <parameters>
            <parameter name="path" type="string"/>
            
        </parameters>
        <body>
            <http:request config-ref="httpreq-config" path="#[vars.path]" method="GET" />
        </body>
        <output type="any"/>
    </operation>
	<operation name="set-payload-hardcoded"
		doc:description="Sets the payload to the String value 'Wubba Lubba Dub Dub'">
		<body>
			<mule:set-payload value="Wubba Lubba Dub Dub" />
		</body>
		<output type="string" doc:description="Payload's output" />
	</operation>

	<operation name="set-payload-hardcoded-two-times"
		doc:description="Sets the payload to the String value 'Wubba Lubba Dub Dub Dub Dub' (uses references to local operation)">
		<body>

			<mule:set-payload value="#[payload ++ ' Dub Dub']" />
		</body>
		<output type="string" doc:description="Payload's output" />
	</operation>

	<operation name="LogMessage"
		doc:description="Used for logging events">
		
		<parameters>
		
			<parameter name="logLevel" displayName="Log Level"
				type="any" doc:default="INFO"
				doc:description="choose your log level" >
				
            </parameter>
			<parameter name="message" displayName="Message"
				use="OPTIONAL" type="any" defaultValue='Message to log'
				doc:description="Message to be logged"  />
		</parameters>
		<body>
			<mule:logger level="INFO" doc:name="Log Debug"
				message='#[output application/java
---
{
logLevel:vars.logLevel,
message:vars.message,
host:vars.host,
port:vars.port,
protocol:vars.protocol}]'></mule:logger>
		</body>
		<output type="string" />
	</operation>
</module>
